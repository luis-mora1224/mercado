{% extends "base.html" %}
{% load static %}
{% block content %}
<h1>Mercado Defensores de la Republica</h1>

  <div class="container white" id="cn_categoria">
    <div class="col s8">
      <div class="row">
        <div class="col s2 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Articulos Para el Hogar</span>
              <p>Articulos para decorar o uso diario en el hogar.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
        <div class="col s2 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Golosinas</span>
              <p>Dulces en general.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
        <div class="col s2 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Comestibles</span>
              <p>Todo tipo de alimentos.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
        <div class="col s2 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Juguetes</span>
              <p>Juguetes de todo tipo para niños.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
        <div class="col s2 m6">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title">Articulos de Belleza</span>
              <p>Cosmeticos, accesorios, tintes, etc.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!--Div del formulario-->
    <div class="col s4 ">
        <form method="POST" c id="form" onsubmit="local_categoria_insertar(event);" accept-charset="utf-8">
        {% csrf_token %} 
    
        <div class="row">
          <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
          </div>  
          <div class="input-field col s10">
            <!--{{ form.idcategoria }}
            <label for="first_name">Clave</label>-->
          </div>
          <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
          </div> 
        </div>

      <div class="row">
        <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
        </div>
        <div class="input-field col s10">
          
          {{ form.nombre }}
          <label for="first_name">Nombre<i class="Small material-icons right">mode_edit</i></label>

        </div>
        <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
        </div>
      </div>

        <div class="row">
          <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
          </div>
          <div class="input-field col s10">
            
            {{ form.catedescripcion }}
            <label for="first_name">Descripción<i class="Small material-icons right">mode_edit</i> </label>

          </div>
          <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
        </div>
        </div>

        <div class="row">
          <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          </div>
          <div class="input-field col s10">
          <!--{{ form.catetipo }}-->
            <select id="catetipo" class="icons">
              <option value="A" data-icon="{% static 'image/Casa.jpg' %}">Articulos para el hogar</option>
              <option value="G" data-icon="{% static 'image/Dulces.jpg' %}">Golosinas</option>
              <option value="C" data-icon="{% static 'image/Comestibles.jpg' %}" class="left"  >Comestibles</option>
              <option value="J" data-icon="{% static 'image/Juguetes.jpg' %}">Juguetes</option>
              <option value="B" data-icon="{% static 'image/Belleza.jpg' %}">Articulos de belleza</option>        
            </select>

            <label for="first_name">Tipo</label>
          </div>
          <div class="input-field col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
          </div>
        </div>
        
        <div class="row">
          <div class="col s1">
          <!--<input  id="first_name" type="text" class="validate">-->
          
          </div>
          <div class="col s11">
            <center>
              <button class="btn waves-effect waves-light" type="submit" name="action">Guardar
              <i class="material-icons right">send</i>
            </button>
            </center>
          </div>
        </div>
    
      </form>
    </div>
  	
  </div>
<!-- contenedor de las listas
  <div class="container white">
    <div class="row">
      <div class="col s12">
       <div class="bordeSeccion" style="height:188px;margin-top:25px;margin-bottom:5px;" id="con_cat_deselecciona">
      <div class="form-group col-md-12 formFila" style="margin-top:20px;margin-left:10px;">
        <div class="form-row col-md-11" style="margin-top:-15px;">
          <table id="con_cat_table" class="table table-responsive table-bordered table-sm table-hover">
            <thead>
              <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Descripción</th>
                <th>Tipo</th>            
              </tr>
            </thead>
            <tbody id="con_cat_selecciona">
              {% for cat in categorias %}
                <tr>
                  <td>{{ cat.idcategoria }}</td>
                  <td>{{ cat.nombre }}</td>
                  <td>{{ cat.catedescripcion }}</td>
                  <td>{{ cat.catetipo }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
      </div>
    </div>
  </div>-->


<script type="text/javascript">   
  //inciamos el select del form

	function local_categoria_insertar(e){
		e.preventDefault(); //evitamos que el formulario se envie 
		//let serializeData = $("#cn_categoria").serialize();
		//var cateclave1 = document.getElementById('cateclave').value; ,idcategoria:cateclave1
    var nombre1 = document.getElementById('nombre').value;
		var catedescripcion1 = document.getElementById('catedescripcion').value;
		var catetipo1 = document.getElementById('catetipo').value;

		// AGREGAR
			$.ajax({
				url: '{%url 'url_categoria_new' %}',
				type: "POST",
				'data': {csrfmiddlewaretoken :'{{csrf_token}}',nombre:nombre1,catedescripcion:catedescripcion1, catetipo:catetipo1},
				success: function (data) {
					var valido = data["valido"];
          //location.reload();
          //document.getElementById('cateclave').value = "";
          document.getElementById('nombre').value= "";
          document.getElementById('catedescripcion').value= "";
          document.getElementById('catetipo').value= "";
          M.toast({html: 'Categoria Agregada', classes: 'rounded'});
					//cn_cue_contenedor.load("{%url 'url_categoria'%}");
				}
			});
	}
</script>

{% endblock %}


